<html>
	<head>
		<script type="text/javascript" src="./BBB.js" ></script>
		<script type="text/javascript" >
		var tests = [ 
			function () {  // JSON serialization
				var book = new Bookmark("localhost", "Test1", 0, 500);
				var book2 = new Bookmark("google", "Test 2", 603, 1220);
				
				var ser = book.toJSON();
				var book3 = Bookmark.prototype.fromJSON(ser);
				
				alert(ser);
				alert(book3.toString());
				
				ser = book2.toJSON();
				var book4 = Bookmark.prototype.fromJSON(ser);
				
				alert(ser);				
				alert("Before cookie:\n"+book2.toString());
				alert("After cookie:\n"+book4.toString());
			},
			
			function() { // Test TOC output
				Mgr.printTOC();
				
				Mgr.addChapter(new Bookmark('http://www.archive.org/download/Kinetic_Art_Demo_Video/nym.ogv',
				'Kinetic Art', 4, 14));
				
				// Print again with extra element, ensure doesn't double-up!
				Mgr.printTOC();
			}
		];
		
		function init() {
			Mgr.init();
			Mgr.setVideoId("player");
			Mgr.setTOCId("tblOfContents");
			
			Mgr.addChapter(new Bookmark('http://upload.wikimedia.org/wikipedia/commons/7/75/Big_Buck_Bunny_Trailer_400p.ogg',
			'Big Buck Bunny', 4, 14));
			
			Mgr.addChapter(new Bookmark('http://www.archive.org/download/deadmandirewolffanclub/DireWolfFanClub.ogv',
			'Dire Wolf Fan Club', 4, 14));
			
			Mgr.addChapter(new Bookmark('http://www.archive.org/download/TheLivingTreasuresOfBali-OggVersion/Kembang_Kuning_Kumpul_Sueta.ogg',
			'Treasures of bali', 4, 14));
		}
		
		function setCookie (name, value, expDays) {
				var sDate="";
				
				if (!name.length)
					throw "name can't be empty";
				else {
					if (expDays) {
						var oDate = new Date();
						oDate.setTime(oDate.getTime()+(days*24*60*60*1000));
						sDate="; expires="+date.toGMTString();
					}
					
					document.cookie=name+"="+value+sDate;
				}
			}
			
			// return string
			function getCookie(name) {
				if (document.cookie.length>0) {
					var start=document.cookie.indexOf(name + "=");
					if (start!==-1) {
						start += name.length+1;
						var end=document.cookie.indexOf(";",start);
						if (end===-1) end=document.cookie.length;
						return unescape(document.cookie.substring(start,end));
					}
				}
				return "";
			}
			
		function test() {
			init();
			tests[1]();
		}
		</script>
	</head>
	<body onload="test()">
		<video controls="true" width="640" height="360" id="player" src="" type="video/ogg"></video>
		<table id="tblOfContents"></table>
	</body>
</html>